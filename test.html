<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>

</head>
<body>
    <h1>Email Scam Detection</h1>
    <textarea id="emailText" rows="4" cols="50"></textarea>
    <button onclick="predict()">Check Email</button>
    <p id="result"></p>
    <script>
        async function predict() {
            const MAX_LEN = 20;
            console.log("predicting");
            const model = await tf.loadLayersModel('./tfjs_model/model.json');
            const emailText = document.getElementById('emailText').value;

            const words = emailText.toLowerCase().split(/\s+/);
            const sequence = words.map(word => word.charCodeAt(0) - 'a'.charCodeAt(0) + 1);
            console.log(sequence);

            const paddedSequence = Array.from({ length: MAX_LEN }, (_, i) => sequence[i] || 0);
            const input = tf.tensor([paddedSequence]);

            const prediction = model.predict(input);
            const resultElement = document.getElementById('result');
            console.log(prediction.dataSync()[0]);

            if (prediction.dataSync()[0] >= 0.5) {
                resultElement.textContent = "This email is a scam.";
            } else {
                resultElement.textContent = "This email is not a scam.";
            }
        }

    </script>
</body>
</html>



